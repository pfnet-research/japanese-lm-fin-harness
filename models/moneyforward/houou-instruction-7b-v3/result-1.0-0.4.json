{
  "results": {
    "security_sales_1-1.0-0.4": {
      "acc,none": 0.3508771929824561,
      "acc_stderr,none": 0.06377448947368158,
      "acc_norm,none": 0.3508771929824561,
      "acc_norm_stderr,none": 0.06377448947368158,
      "map,none": 0.6271929824561403,
      "map_stderr,none": 0.03829879209774776,
      "map_2,none": 0.5614035087719298,
      "map_2_stderr,none": 0.05017228375731226,
      "map_3,none": 0.5964912280701754,
      "map_3_stderr,none": 0.04472824134730514,
      "map_4,none": 0.6271929824561403,
      "map_4_stderr,none": 0.03829879209774776,
      "map_norm,none": 0.6286549707602339,
      "map_norm_stderr,none": 0.03806888731431562,
      "map_2_norm,none": 0.5614035087719298,
      "map_2_norm_stderr,none": 0.05017228375731226,
      "map_3_norm,none": 0.6023391812865497,
      "map_3_norm_stderr,none": 0.043706220081966014,
      "map_4_norm,none": 0.6286549707602339,
      "map_4_norm_stderr,none": 0.03806888731431562,
      "alias": "security_sales_1-1.0-0.4"
    },
    "fp2-1.0-0.4": {
      "acc,none": 0.25684210526315787,
      "acc_stderr,none": 0.02006709411703634,
      "acc_norm,none": 0.25684210526315787,
      "acc_norm_stderr,none": 0.02006709411703634,
      "map,none": 0.5292982456140358,
      "map_stderr,none": 0.01348108041192863,
      "map_2,none": 0.38526315789473686,
      "map_2_stderr,none": 0.01919971617152515,
      "map_3,none": 0.4708771929824567,
      "map_3_stderr,none": 0.016558971178835393,
      "map_4,none": 0.5292982456140358,
      "map_4_stderr,none": 0.01348108041192863,
      "map_norm,none": 0.5292982456140358,
      "map_norm_stderr,none": 0.01348108041192863,
      "map_2_norm,none": 0.38526315789473686,
      "map_2_norm_stderr,none": 0.01919971617152515,
      "map_3_norm,none": 0.4708771929824567,
      "map_3_norm_stderr,none": 0.016558971178835393,
      "map_4_norm,none": 0.5292982456140358,
      "map_4_norm_stderr,none": 0.01348108041192863,
      "alias": "fp2-1.0-0.4"
    },
    "cpa_audit-1.0-0.4": {
      "acc,none": 0.13819095477386933,
      "acc_stderr,none": 0.01732008740419801,
      "acc_norm,none": 0.13316582914572864,
      "acc_norm_stderr,none": 0.0170517578589349,
      "map,none": 0.3858877721943045,
      "map_stderr,none": 0.01352406435372471,
      "map_2,none": 0.2236180904522613,
      "map_2_stderr,none": 0.01815823759435009,
      "map_3,none": 0.2721943048576213,
      "map_3_stderr,none": 0.017602299374971785,
      "map_4,none": 0.3268425460636513,
      "map_4_stderr,none": 0.01618007952592103,
      "map_norm,none": 0.38128140703517555,
      "map_norm_stderr,none": 0.013348298478770384,
      "map_2_norm,none": 0.21608040201005024,
      "map_2_norm_stderr,none": 0.017951261713061883,
      "map_3_norm,none": 0.26633165829145716,
      "map_3_norm_stderr,none": 0.01741774350312799,
      "map_4_norm,none": 0.32223618090452233,
      "map_4_norm_stderr,none": 0.015990670194483633,
      "alias": "cpa_audit-1.0-0.4"
    },
    "cma_basics-1.0-0.4": {
      "acc,none": 0.21052631578947367,
      "acc_stderr,none": 0.06702258315442243,
      "acc_norm,none": 0.2631578947368421,
      "acc_norm_stderr,none": 0.0723926637268818,
      "map,none": 0.47807017543859653,
      "map_stderr,none": 0.04615834915890291,
      "map_2,none": 0.2894736842105263,
      "map_2_stderr,none": 0.06702258315442243,
      "map_3,none": 0.412280701754386,
      "map_3_stderr,none": 0.05717689371603139,
      "map_4,none": 0.47807017543859653,
      "map_4_stderr,none": 0.04615834915890291,
      "map_norm,none": 0.5350877192982456,
      "map_norm_stderr,none": 0.047937504895089224,
      "map_2_norm,none": 0.39473684210526316,
      "map_2_norm_stderr,none": 0.06840463748816268,
      "map_3_norm,none": 0.48245614035087714,
      "map_3_norm_stderr,none": 0.058222129892395655,
      "map_4_norm,none": 0.5350877192982456,
      "map_4_norm_stderr,none": 0.047937504895089224,
      "alias": "cma_basics-1.0-0.4"
    },
    "chabsa-1.0-0.4": {
      "acc,none": 0.6185420173507704,
      "acc_stderr,none": 0.0055276820979613134,
      "f1,none": 0.5322326131599113,
      "f1_stderr,none": "N/A",
      "acc_norm,none": 0.6185420173507704,
      "acc_norm_stderr,none": 0.0055276820979613134,
      "f1_norm,none": 0.5322326131599113,
      "f1_norm_stderr,none": "N/A",
      "alias": "chabsa-1.0-0.4"
    }
  },
  "group_subtasks": {
    "chabsa-1.0-0.4": [],
    "cma_basics-1.0-0.4": [],
    "cpa_audit-1.0-0.4": [],
    "fp2-1.0-0.4": [],
    "security_sales_1-1.0-0.4": []
  },
  "configs": {
    "chabsa-1.0-0.4": {
      "task": "chabsa-1.0-0.4",
      "dataset_path": "jlm_fin_eval/datasets/chabsa/chabsa.py",
      "dataset_name": "chABSA",
      "test_split": "test",
      "doc_to_text": "センテンス: {{sentence}}<NL>ターゲット: {{target}}<NL>システム:",
      "doc_to_target": "{{polarity}}",
      "doc_to_choice": [
        "positive",
        "negative"
      ],
      "description": "ユーザー: センテンスにおける、ターゲットのセンチメントをpositiveかnegativeで答えてください。<NL>システム: 分かりました。<NL>",
      "target_delimiter": " ",
      "fewshot_delimiter": "<NL>",
      "num_fewshot": 0,
      "metric_list": [
        {
          "metric": "acc",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "acc_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "f1",
          "aggregation": "2class_adjusted_macro_f1_score_for_chabsa",
          "higher_is_better": true
        },
        {
          "metric": "f1_norm",
          "aggregation": "2class_adjusted_macro_f1_score_for_chabsa",
          "higher_is_better": true
        }
      ],
      "output_type": "multiple_choice",
      "repeats": 1,
      "should_decontaminate": false,
      "doc_to_decontamination_query": "sentence",
      "metadata": {
        "version": 1.0
      }
    },
    "cma_basics-1.0-0.4": {
      "task": "cma_basics-1.0-0.4",
      "dataset_path": "jlm_fin_eval/datasets/cma_basics/cma_basics.py",
      "dataset_name": "cma_basics",
      "test_split": "test",
      "doc_to_text": "def doc_to_text_04(doc, SEP=\"<NL>\"):\n    q_doc_text = doc[\"question\"]\n    if doc[\"context\"] and doc[\"context\"] != \"\":\n        q_doc_text += \"\\n\" + doc[\"context\"]\n    choices = SEP.join([f\"- {choice}\" for choice in doc[\"choices\"][\"text\"]])\n    input_text = f\"質問：{q_doc_text}{SEP}\" + f\"選択肢：{SEP}{choices}\"\n    return f\"ユーザー: {input_text}{SEP}システム: \"\n",
      "doc_to_target": "def doc_to_target_01(doc):\n    return [\n        choice_text\n        for choice_id, choice_text in zip(doc[\"choices\"][\"id\"], doc[\"choices\"][\"text\"])\n        if choice_id == doc[\"answer\"]\n    ][0]\n",
      "doc_to_choice": "def doc_to_choices_01(doc):\n    choices = doc[\"choices\"][\"text\"]\n    return choices\n",
      "description": "ユーザー: 与えられた選択肢の中から、最適な答えを選んでください。<NL>システム: 分かりました。<NL>",
      "target_delimiter": "",
      "fewshot_delimiter": "<NL>",
      "num_fewshot": 0,
      "metric_list": [
        {
          "metric": "acc",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "acc_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4_norm",
          "aggregation": "mean",
          "higher_is_better": true
        }
      ],
      "output_type": "multiple_choice",
      "repeats": 1,
      "should_decontaminate": true,
      "doc_to_decontamination_query": "sentence",
      "metadata": {
        "version": 1.0
      }
    },
    "cpa_audit-1.0-0.4": {
      "task": "cpa_audit-1.0-0.4",
      "dataset_path": "jlm_fin_eval/datasets/cpa/cpa_audit.py",
      "dataset_name": "cpa_audit",
      "test_split": "test",
      "doc_to_text": "def doc_to_text_04(doc, SEP=\"<NL>\"):\n    q_doc_text = doc[\"question\"]\n    if doc[\"context\"] and doc[\"context\"] != \"\":\n        q_doc_text += \"\\n\" + doc[\"context\"]\n    choices = SEP.join([f\"- {choice}\" for choice in doc[\"choices\"][\"text\"]])\n    input_text = f\"質問：{q_doc_text}{SEP}\" + f\"選択肢：{SEP}{choices}\"\n    return f\"ユーザー: {input_text}{SEP}システム: \"\n",
      "doc_to_target": "def doc_to_target_01(doc):\n    return [\n        choice_text\n        for choice_id, choice_text in zip(doc[\"choices\"][\"id\"], doc[\"choices\"][\"text\"])\n        if choice_id == doc[\"answer\"]\n    ][0]\n",
      "doc_to_choice": "def doc_to_choices_01(doc):\n    choices = doc[\"choices\"][\"text\"]\n    return choices\n",
      "description": "ユーザー: 与えられた答えの組み合わせの選択肢の中から、最適な選択肢を選んでください。<NL>システム: 分かりました。<NL>",
      "target_delimiter": "",
      "fewshot_delimiter": "<NL>",
      "num_fewshot": 0,
      "metric_list": [
        {
          "metric": "acc",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "acc_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4_norm",
          "aggregation": "mean",
          "higher_is_better": true
        }
      ],
      "output_type": "multiple_choice",
      "repeats": 1,
      "should_decontaminate": true,
      "doc_to_decontamination_query": "sentence",
      "metadata": {
        "version": 1.0
      }
    },
    "fp2-1.0-0.4": {
      "task": "fp2-1.0-0.4",
      "dataset_path": "jlm_fin_eval/datasets/fp2/fp2.py",
      "dataset_name": "fp2",
      "test_split": "test",
      "doc_to_text": "def doc_to_text_04(doc, SEP=\"<NL>\"):\n    q_doc_text = doc[\"question\"]\n    if doc[\"context\"] and doc[\"context\"] != \"\":\n        q_doc_text += \"\\n\" + doc[\"context\"]\n    input_text = f\"{q_doc_text}\"\n    return f\"ユーザー: {input_text}{SEP}システム: \"\n",
      "doc_to_target": "def doc_to_target_00(doc):\n    answer = doc[\"choices\"][\"text\"][doc[\"choices\"][\"id\"].index(doc[\"answer\"])]\n    return answer\n",
      "doc_to_choice": "def doc_to_choices_00(doc):\n    choices = [choice for choice in doc[\"choices\"][\"text\"]]\n    return choices\n",
      "description": "ユーザー: 与えられた選択肢の中から、最適な答えを選んでください。<NL>システム: 分かりました。<NL>",
      "target_delimiter": "",
      "fewshot_delimiter": "<NL>",
      "num_fewshot": 0,
      "metric_list": [
        {
          "metric": "acc",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "acc_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4_norm",
          "aggregation": "mean",
          "higher_is_better": true
        }
      ],
      "output_type": "multiple_choice",
      "repeats": 1,
      "should_decontaminate": true,
      "doc_to_decontamination_query": "sentence",
      "metadata": {
        "version": 1.0
      }
    },
    "security_sales_1-1.0-0.4": {
      "task": "security_sales_1-1.0-0.4",
      "dataset_path": "jlm_fin_eval/datasets/security_sales_1/security_sales_1.py",
      "dataset_name": "security_sales_1",
      "test_split": "test",
      "doc_to_text": "def doc_to_text_04(doc, SEP=\"<NL>\"):\n    q_doc_text = doc[\"question\"]\n    if doc[\"context\"] and doc[\"context\"] != \"\":\n        q_doc_text += \"\\n\" + doc[\"context\"]\n    choices = SEP.join([f\"- {choice}\" for choice in doc[\"choices\"][\"text\"]])\n    input_text = f\"質問：{q_doc_text}{SEP}\" + f\"選択肢：{SEP}{choices}\"\n    return f\"ユーザー: {input_text}{SEP}システム: \"\n",
      "doc_to_target": "def doc_to_target_01(doc):\n    return [\n        choice_text\n        for choice_id, choice_text in zip(doc[\"choices\"][\"id\"], doc[\"choices\"][\"text\"])\n        if choice_id == doc[\"answer\"]\n    ][0]\n",
      "doc_to_choice": "def doc_to_choices_01(doc):\n    choices = doc[\"choices\"][\"text\"]\n    return choices\n",
      "description": "ユーザー: 与えられた選択肢の中から、最適な答えを選んでください。<NL>システム: 分かりました。<NL>",
      "target_delimiter": "",
      "fewshot_delimiter": "<NL>",
      "num_fewshot": 0,
      "metric_list": [
        {
          "metric": "acc",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "acc_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_2_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_3_norm",
          "aggregation": "mean",
          "higher_is_better": true
        },
        {
          "metric": "map_4_norm",
          "aggregation": "mean",
          "higher_is_better": true
        }
      ],
      "output_type": "multiple_choice",
      "repeats": 1,
      "should_decontaminate": true,
      "doc_to_decontamination_query": "sentence",
      "metadata": {
        "version": 1.0
      }
    }
  },
  "versions": {
    "chabsa-1.0-0.4": 1.0,
    "cma_basics-1.0-0.4": 1.0,
    "cpa_audit-1.0-0.4": 1.0,
    "fp2-1.0-0.4": 1.0,
    "security_sales_1-1.0-0.4": 1.0
  },
  "n-shot": {
    "chabsa-1.0-0.4": 0,
    "cma_basics-1.0-0.4": 0,
    "cpa_audit-1.0-0.4": 0,
    "fp2-1.0-0.4": 0,
    "security_sales_1-1.0-0.4": 0
  },
  "config": {
    "model": "vllm",
    "model_args": "pretrained=moneyforward/houou-instruction-7b-v3,dtype=float16",
    "batch_size": 1,
    "batch_sizes": [],
    "device": null,
    "use_cache": null,
    "limit": null,
    "bootstrap_iters": 100000,
    "gen_kwargs": null
  },
  "git_hash": "7817456",
  "date": 1714418485.969048,
  "pretty_env_info": "'NoneType' object has no attribute 'splitlines'",
  "transformers_version": "4.40.1",
  "upper_git_hash": null
}